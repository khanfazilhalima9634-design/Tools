<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GlobalLoanCalc — Loan & EMI Calculator</title>
  <meta name="description" content="Free Loan & EMI calculator with multi-currency support, EMI column in amortization schedule, and AdSense placeholders." />
  <meta name="robots" content="index, follow" />

  <!-- Fonts + Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root{
      --bg:#f4f7fb; --card:#fff; --muted:#6b7280; --accent:#5b21b6; --accent-2:#06b6d4;
      --radius:12px; --shadow:0 12px 30px rgba(16,24,40,0.06);
      --max-width:1100px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:linear-gradient(180deg,#f8fbff 0,#eef6ff 100%);color:#0f1724}
    .container{max-width:var(--max-width);margin:0 auto;padding:20px}
    header{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:14px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(90deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800}
    nav ul{display:flex;gap:12px;list-style:none;margin:0;padding:0}
    nav a{color:#0f1724;text-decoration:none;font-weight:600}
    .ad-top{margin:12px 0;border-radius:12px;overflow:hidden;min-height:90px;background:#fff;border:1px dashed rgba(15,23,42,0.06);display:flex;align-items:center;justify-content:center}
    main{display:grid;grid-template-columns:1fr 360px;gap:20px;align-items:start}
    @media(max-width:960px){main{grid-template-columns:1fr}}
    .card{background:var(--card);padding:16px;border-radius:var(--radius);box-shadow:var(--shadow)}
    .title{font-size:1.4rem;margin:0 0 8px 0}
    label{display:block;font-weight:700;margin-bottom:6px}
    input[type=text], input[type=number], select{width:100%;padding:10px;border-radius:8px;border:1px solid #eef2ff;background:#fbfdff;font-size:15px}
    .field-symbol{position:relative}
    .currency-symbol{position:absolute;left:12px;top:12px;color:var(--muted);font-weight:700}
    .slider{width:100%;margin-top:8px}
    .slider-value{text-align:right;color:var(--accent);font-weight:700;margin-top:6px}
    .controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .btn{padding:10px 14px;border-radius:8px;border:0;cursor:pointer;font-weight:700}
    .btn-primary{background:linear-gradient(90deg,var(--accent),#8b5cf6);color:#fff}
    .btn-ghost{background:transparent;border:1px solid rgba(15,23,42,0.06);color:var(--muted)}
    .results{margin-top:14px;display:none}
    .results.active{display:block}
    .grid-3{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:10px}
    .result-card{padding:12px;border-radius:8px;background:linear-gradient(180deg,#fff,#fbfdff);border-left:6px solid var(--accent)}
    .result-card .value{font-weight:800;color:var(--accent);font-size:1.15rem}
    .amort-wrap{max-height:360px;overflow:auto;margin-top:12px;border-radius:8px;border:1px solid #f1f5f9}
    table{width:100%;border-collapse:collapse;background:white}
    th,td{padding:10px;border-bottom:1px solid #f1f5f9;text-align:left;font-size:14px}
    th{background:linear-gradient(90deg,var(--accent),#8b5cf6);color:white;position:sticky;top:0}
    .sidebar{display:flex;flex-direction:column;gap:12px}
    .ad-box{min-height:250px;border-radius:8px;border:1px dashed rgba(15,23,42,0.06);display:flex;align-items:center;justify-content:center;background:#fff}
    footer{margin-top:20px;text-align:center;color:var(--muted);font-size:13px}
    .small{font-size:13px;color:var(--muted)}
    .toggle-full { margin-left:8px; font-size:13px; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">GL</div>
        <div>
          <div style="font-weight:800">GlobalLoanCalc</div>
          <div class="small">Loan & EMI Tools</div>
        </div>
      </div>
      <nav aria-label="main">
        <ul>
          <li><a href="#calculator">Calculator</a></li>
          <li><a href="#faq">FAQ</a></li>
        </ul>
      </nav>
    </header>

    <!-- Top ad placeholder -->
    <div id="ad-top" class="ad-top card"><div id="ad-top-inner">Ad Space — Leaderboard (configure AdSense in ADSENSE_CONFIG)</div></div>

    <main>
      <!-- Calculator column -->
      <section id="calculator" class="card" aria-labelledby="calcTitle">
        <h2 id="calcTitle" class="title">Loan & EMI Calculator</h2>
        <p class="small">Enter loan amount, interest rate and term. Inputs accept large numbers (no strict maximum). Calculations happen locally in your browser.</p>

        <div style="margin-top:12px;display:grid;gap:12px">
          <div style="display:flex;gap:10px;align-items:center">
            <label style="margin:0 8px 0 0">Currency</label>
            <select id="currency" aria-label="Currency">
              <option value="USD" data-locale="en-US" data-symbol="$">USD — $</option>
              <option value="EUR" data-locale="de-DE" data-symbol="€">EUR — €</option>
              <option value="INR" data-locale="en-IN" data-symbol="₹">INR — ₹</option>
              <option value="GBP" data-locale="en-GB" data-symbol="£">GBP — £</option>
            </select>
            <div style="flex:1"></div>
            <label class="small" style="margin:0">Show full schedule</label>
            <input id="show-full" type="checkbox" class="toggle-full" title="Show every month in amortization table">
          </div>

          <div>
            <label for="loan-amount">Loan Amount</label>
            <div class="field-symbol">
              <span id="currency-symbol" class="currency-symbol">$</span>
              <input id="loan-amount" type="text" inputmode="numeric" placeholder="e.g. 25000 or 2.5e4" value="25000" aria-label="Loan amount">
            </div>
            <input id="loan-slider" class="slider" type="range" min="100" max="1000000" step="100" value="25000" aria-hidden="true">
            <div class="slider-value" id="loan-display"></div>
          </div>

          <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
            <div>
              <label for="rate">Interest Rate (annual %)</label>
              <input id="rate" type="number" step="0.01" value="7.5" aria-label="Interest rate">
              <input id="rate-slider" class="slider" type="range" min="0" max="100" step="0.01" value="7.5" aria-hidden="true">
              <div class="slider-value" id="rate-display"></div>
            </div>

            <div>
              <label for="term">Loan Term (years)</label>
              <input id="term" type="number" step="1" min="1" value="5" aria-label="Loan term">
              <input id="term-slider" class="slider" type="range" min="1" max="50" step="1" value="5" aria-hidden="true">
              <div class="slider-value" id="term-display"></div>
            </div>
          </div>

          <div>
            <label for="loan-type">Loan Type</label>
            <select id="loan-type">
              <option>Personal</option>
              <option>Home</option>
              <option>Car</option>
              <option>Education</option>
              <option>Business</option>
            </select>
          </div>

          <div class="controls">
            <button id="btn-calc" class="btn btn-primary"><i class="fas fa-calculator"></i> Calculate EMI</button>
            <button id="btn-reset" class="btn btn-ghost"><i class="fas fa-redo"></i> Reset</button>
            <button id="btn-print" class="btn btn-ghost"><i class="fas fa-print"></i> Print</button>
          </div>

          <!-- Results -->
          <div id="results" class="results" aria-live="polite">
            <div class="grid-3">
              <div class="result-card"><div class="small">Monthly Payment</div><div class="value" id="emi-val">$0.00</div></div>
              <div class="result-card"><div class="small">Total Interest</div><div class="value" id="total-interest">$0.00</div></div>
              <div class="result-card"><div class="small">Total Payment</div><div class="value" id="total-payment">$0.00</div></div>
            </div>

            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
              <div class="small">Payoff:</div>
              <div id="payoff" class="small">—</div>
            </div>

            <div class="amort-wrap" style="margin-top:10px">
              <table id="amort-table" aria-label="Amortization schedule">
                <thead>
                  <tr><th>Month</th><th>EMI</th><th>Principal</th><th>Interest</th><th>Balance</th></tr>
                </thead>
                <tbody id="amort-body"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="card">
          <div style="font-weight:800">Why GlobalLoanCalc?</div>
          <ul class="small" style="margin-top:8px">
            <li>Private — calculations in your browser</li>
            <li>Unlimited numeric input (very large loans supported)</li>
            <li>Designed for SEO & fast performance</li>
          </ul>
        </div>

        <div id="ad-side-large" class="ad-box card"><div id="ad-side-large-inner">Ad Space — 300×600 (configure AdSense)</div></div>
        <div id="ad-side-small" class="ad-box card"><div id="ad-side-small-inner">Ad Space — 300×250 (configure AdSense)</div></div>
      </aside>
    </main>

    <footer>
      <div class="small">© 2025 GlobalLoanCalc — Built with privacy in mind</div>
    </footer>
  </div>

  <!-- ================= SCRIPT: Calculator + Ads ================= -->
  <script>
  /**************************************************************************
   * Single AdSense configuration
   * - Set ADSENSE.client to 'ca-pub-XXXXXXXXXXXX' to enable AdSense.
   * - Set ADSENSE.slots.top / side_large / side_small with your ad unit IDs.
   * If left blank, placeholders show guidance.
   **************************************************************************/
  const ADSENSE = {
    client: '', // e.g. 'ca-pub-1234567890123456'
    slots: {
      top: '',         // e.g. '1111111111'
      side_large: '',  // e.g. '2222222222'
      side_small: ''   // e.g. '3333333333'
    }
  };

  // Utility: parse numeric string (allow commas, spaces, scientific notation)
  function parseNumber(v){
    if (v == null) return 0;
    const s = String(v).trim().replace(/,/g,'').replace(/\s+/g,'');
    const n = Number(s);
    return Number.isFinite(n) ? n : 0;
  }

  // Elements
  const loanInput = document.getElementById('loan-amount');
  const loanSlider = document.getElementById('loan-slider');
  const loanDisplay = document.getElementById('loan-display');

  const rateInput = document.getElementById('rate');
  const rateSlider = document.getElementById('rate-slider');
  const rateDisplay = document.getElementById('rate-display');

  const termInput = document.getElementById('term');
  const termSlider = document.getElementById('term-slider');
  const termDisplay = document.getElementById('term-display');

  const currencySelect = document.getElementById('currency');
  const currencySymbol = document.getElementById('currency-symbol');

  const btnCalc = document.getElementById('btn-calc');
  const btnReset = document.getElementById('btn-reset');
  const btnPrint = document.getElementById('btn-print');

  const results = document.getElementById('results');
  const emiVal = document.getElementById('emi-val');
  const totalInterestVal = document.getElementById('total-interest');
  const totalPaymentVal = document.getElementById('total-payment');
  const payoffEl = document.getElementById('payoff');
  const amortBody = document.getElementById('amort-body');
  const showFull = document.getElementById('show-full');

  // Format currency using Intl with sensible fallback
  function formatCurrency(amount){
    const code = currencySelect.value || 'USD';
    const locale = currencySelect.selectedOptions[0]?.dataset.locale || 'en-US';
    try {
      return new Intl.NumberFormat(locale, { style: 'currency', currency: code, minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(amount);
    } catch(e){
      return (currencySelect.selectedOptions[0]?.dataset.symbol || code) + ' ' + Number(amount).toLocaleString();
    }
  }

  function updateCurrencySymbol(){
    currencySymbol.textContent = currencySelect.selectedOptions[0]?.dataset.symbol || currencySelect.value;
  }

  // Update display fields
  function updateDisplays(){
    loanDisplay.textContent = formatCurrency(parseNumber(loanInput.value));
    rateDisplay.textContent = parseNumber(rateInput.value).toFixed(2) + '%';
    termDisplay.textContent = parseNumber(termInput.value) + ' Years';
  }

  // Slider sync (slider is convenience; input allows unlimited range)
  loanInput.addEventListener('input', ()=> {
    const n = parseNumber(loanInput.value);
    // keep slider in-range for convenience but don't constrain input
    if (loanSlider) loanSlider.value = Math.max(Number(loanSlider.min), Math.min(Number(loanSlider.max), n || 0));
    updateDisplays();
  });
  if (loanSlider) loanSlider.addEventListener('input', ()=> { loanInput.value = loanSlider.value; updateDisplays(); });

  rateInput.addEventListener('input', ()=> { if (rateSlider) rateSlider.value = rateInput.value; updateDisplays(); });
  if (rateSlider) rateSlider.addEventListener('input', ()=> { rateInput.value = rateSlider.value; updateDisplays(); });

  termInput.addEventListener('input', ()=> { if (termSlider) termSlider.value = termInput.value; updateDisplays(); });
  if (termSlider) termSlider.addEventListener('input', ()=> { termInput.value = termSlider.value; updateDisplays(); });

  currencySelect.addEventListener('change', ()=> { updateCurrencySymbol(); updateDisplays(); if (results.classList.contains('active')) runCalculate(); });

  // Calculation core
  function runCalculate(){
    const P = parseNumber(loanInput.value);
    const annualRate = parseNumber(rateInput.value);
    const years = Math.max(1, Math.floor(parseNumber(termInput.value)));

    if (P <= 0 || years <= 0){
      alert('Please enter a valid loan amount and term.');
      return;
    }

    const monthlyRate = annualRate / 100 / 12;
    const n = years * 12;

    let emi;
    if (monthlyRate === 0) emi = P / n;
    else emi = P * monthlyRate * Math.pow(1 + monthlyRate, n) / (Math.pow(1 + monthlyRate, n) - 1);

    const total = emi * n;
    const totalInterest = total - P;

    emiVal.textContent = formatCurrency(emi);
    totalInterestVal.textContent = formatCurrency(totalInterest);
    totalPaymentVal.textContent = formatCurrency(total);

    const now = new Date();
    const payoff = new Date(now.getFullYear(), now.getMonth() + n - 1, 1);
    payoffEl.textContent = payoff.toLocaleDateString(undefined, { month: 'short', year: 'numeric' });

    // build amortization (EMI column explicitly)
    buildAmortization(P, annualRate, years, emi);

    results.classList.add('active');
    results.scrollIntoView({ behavior: 'smooth' });
  }

  function buildAmortization(P, annualRate, years, emi){
    const r = annualRate / 100 / 12;
    const n = years * 12;
    let balance = P;
    let html = '';

    const showAll = showFull.checked;

    for (let m = 1; m <= n; m++){
      const interest = balance * r;
      const principal = Math.min(emi - interest, balance);
      balance = Math.max(0, balance - principal);

      if (showAll || m <= 12 || m > n - 5) {
        html += `<tr>
          <td>${m}</td>
          <td>${formatCurrency(emi)}</td>
          <td>${formatCurrency(principal)}</td>
          <td>${formatCurrency(interest)}</td>
          <td>${formatCurrency(balance)}</td>
        </tr>`;
      }

      if (m === 12 && !showAll && n > 17) {
        html += `<tr><td colspan="5" style="text-align:center;color:${getComputedStyle(document.body).getPropertyValue('--muted') || '#6b7280'};font-style:italic">... ${n - 17} months omitted ...</td></tr>`;
      }

      if (balance <= 0) break;
    }

    amortBody.innerHTML = html;
  }

  // Buttons
  btnCalc.addEventListener('click', (e)=> { e.preventDefault(); // sanitize comma separators
    loanInput.value = String(loanInput.value).replace(/,/g,'').trim();
    runCalculate();
  });

  btnReset.addEventListener('click', (e)=> { e.preventDefault();
    loanInput.value = '25000'; rateInput.value = '7.5'; termInput.value = '5';
    if (loanSlider) loanSlider.value = 25000;
    if (rateSlider) rateSlider.value = 7.5;
    if (termSlider) termSlider.value = 5;
    updateCurrencySymbol(); updateDisplays();
    results.classList.remove('active'); amortBody.innerHTML = ''; emiVal.textContent = formatCurrency(0); totalInterestVal.textContent = formatCurrency(0); totalPaymentVal.textContent = formatCurrency(0); payoffEl.textContent = '—';
  });

  btnPrint.addEventListener('click', (e)=> { e.preventDefault(); window.print(); });

  // Initialize displays
  updateCurrencySymbol();
  updateDisplays();

  // Toggle: rebuild amortization when showFull changed and results visible
  showFull.addEventListener('change', ()=> { if (results.classList.contains('active')) runCalculate(); });

  /* ================= AdSense injection (single place edits) ================= */
  (function configureAds(){
    const cfg = ADSENSE;
    // if not configured, show guidance
    if (!cfg.client || !cfg.client.startsWith('ca-pub-')) {
      document.getElementById('ad-top-inner').textContent = 'Ad Space — Leaderboard (configure ADSENSE.client in script)';
      document.getElementById('ad-side-large-inner').textContent = 'Ad Space — 300x600 (configure ADSENSE)';
      document.getElementById('ad-side-small-inner').textContent = 'Ad Space — 300x250 (configure ADSENSE)';
      return;
    }

    // load AdSense script
    const s = document.createElement('script');
    s.async = true;
    s.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=' + encodeURIComponent(cfg.client);
    s.crossOrigin = 'anonymous';
    document.head.appendChild(s);

    function makeIns(slot){
      const ins = document.createElement('ins');
      ins.className = 'adsbygoogle';
      ins.style.display = 'block';
      ins.setAttribute('data-ad-client', cfg.client);
      ins.setAttribute('data-ad-slot', slot);
      ins.setAttribute('data-ad-format', 'auto');
      ins.setAttribute('data-full-width-responsive', 'true');
      return ins;
    }

    // top
    const top = document.getElementById('ad-top-inner');
    top.innerHTML = '';
    if (cfg.slots.top) top.appendChild(makeIns(cfg.slots.top)); else top.textContent = 'Ad slot not set (top)';

    const sideLarge = document.getElementById('ad-side-large-inner');
    sideLarge.innerHTML = '';
    if (cfg.slots.side_large) sideLarge.appendChild(makeIns(cfg.slots.side_large)); else sideLarge.textContent = 'Ad slot not set (side large)';

    const sideSmall = document.getElementById('ad-side-small-inner');
    sideSmall.innerHTML = '';
    if (cfg.slots.side_small) sideSmall.appendChild(makeIns(cfg.slots.side_small)); else sideSmall.textContent = 'Ad slot not set (side small)';

    window.addEventListener('load', ()=> {
      try { (adsbygoogle = window.adsbygoogle || []).push({}); } catch(e) { console.warn('ads push failed', e); }
    });
  })();

  </script>
</body>
</html>
